apiVersion: apps/v1
kind: Deployment
metadata:
  name: dys-deployment
spec:
  # 안정성을 위해 동일한 앱을 2개 실행시킵니다.
  replicas: 2
  selector:
    matchLabels:
      app: dys-backend
  template:
    metadata:
      labels:
        # 이 라벨(app: my-backend)을 보고 service.yaml이 찾아옵니다.
        app: dys-backend
    spec:
      containers:
      - name: dys-backend-container
        # 💡 중요: CI/CD 파이프라인에서 빌드한 본인의 이미지 주소를 넣어야 합니다.
        image: asia-northeast3-docker.pkg.dev/deyeonso10/dys-backend/dys-backend:ffb53ffc44e7465b993d2a01a317979532a1e783
        ports:
        - containerPort: 8000 # 메인 서버 포트
        - containerPort: 8001 # WebSocket 서버 포트